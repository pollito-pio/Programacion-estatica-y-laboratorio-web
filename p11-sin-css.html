<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ejercicio 11 - Date (sin CSS)</title>
</head>
<body>
<h1>Ejercicio 11: Date</h1>

<div>
  <div>
    <div>
      <div><small>Fecha y hora actual</small></div>
      <div id="ahora"></div>
    </div>
  </div>
</div>

<div>
  <div><small>Faltante para Navidad</small></div>
  <div id="navidad"></div>
</div>

<div>
  <div>
    <button id="btn-edad">Calcular edad</button>
    <div>Resultado: <span id="edad-res"></span></div>
  </div>
</div>

<script>
(function () {
  const $ = (id) => document.getElementById(id);

  const pad2 = (n) => String(n).padStart(2, "0");

  const renderAhora = () => {
    const d = new Date();
    const fecha = d.toLocaleDateString("es-ES", { weekday: "long", year: "numeric", month: "long", day: "numeric" });
    const hora = `${pad2(d.getHours())}:${pad2(d.getMinutes())}:${pad2(d.getSeconds())}`;
    $("ahora").textContent = `${fecha} — ${hora}`;
  };

  const renderNavidad = () => {
    const now = new Date();
    const year = now.getMonth() === 11 && now.getDate() > 25 ? now.getFullYear() + 1 : now.getFullYear();
    let christmas = new Date(year, 11, 25, 0, 0, 0, 0); // 25 de diciembre
    if (christmas <= now) christmas = new Date(year + 1, 11, 25);

    const diffMs = christmas - now;
    const totalSeconds = Math.floor(diffMs / 1000);
    const days = Math.floor(totalSeconds / 86400);
    const hours = Math.floor((totalSeconds % 86400) / 3600);
    const minutes = Math.floor((totalSeconds % 3600) / 60);
    const seconds = totalSeconds % 60;

    $("navidad").textContent = `${days} días, ${pad2(hours)} horas, ${pad2(minutes)} minutos y ${pad2(seconds)} segundos`;
  };

  renderAhora();
  renderNavidad();
  setInterval(() => { renderAhora(); renderNavidad(); }, 1000);

  $("btn-edad").addEventListener("click", () => {
    const entrada = prompt("Ingrese su año de nacimiento (YYYY):", "2000");
    if (entrada === null) return; // cancelado
    const year = parseInt(String(entrada).trim(), 10);
    if (!Number.isFinite(year) || year < 1900 || year > 3000) {
      $("edad-res").textContent = "Entrada inválida";
      return;
    }
    const currentYear = new Date().getFullYear();
    const edad = currentYear - year; // según enunciado, solo año
    $("edad-res").textContent = `su edad es ${edad}`;
  });
})();
</script>
</body>
</html>
